{"ast":null,"code":"import React,{useEffect,useState}from'react';import{auth}from'./backend/firebase-db.js';// üîπ Import Firebase authentication correctly\nimport{onAuthStateChanged}from'firebase/auth';// üîπ Explicitly import `onAuthStateChanged`\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function UserApplications(){const[applications,setApplications]=useState([]);const[loading,setLoading]=useState(true);useEffect(()=>{const unsub=onAuthStateChanged(auth,user=>{if(user){fetchApplications(user.uid);}});return()=>unsub();},[]);const fetchApplications=async userId=>{try{var _auth$currentUser;const token=await((_auth$currentUser=auth.currentUser)===null||_auth$currentUser===void 0?void 0:_auth$currentUser.getIdToken());if(!token)return;const res=await fetch(`http://localhost:5000/applications/${userId}`,{headers:{Authorization:`Bearer ${token}`}});const data=await res.json();setApplications(data);}catch(err){console.error('Error fetching applications:',err);}finally{setLoading(false);}};if(loading)return/*#__PURE__*/_jsx(\"p\",{children:\"\\u0417\\u0430\\u0432\\u0430\\u043D\\u0442\\u0430\\u0436\\u0435\\u043D\\u043D\\u044F...\"});return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"\\u041F\\u043E\\u0434\\u0430\\u043D\\u0456 \\u0437\\u0430\\u044F\\u0432\\u043A\\u0438\"}),applications.length===0?/*#__PURE__*/_jsx(\"p\",{children:\"\\u0423 \\u0432\\u0430\\u0441 \\u0449\\u0435 \\u043D\\u0435\\u043C\\u0430\\u0454 \\u043F\\u043E\\u0434\\u0430\\u043D\\u0438\\u0445 \\u0437\\u0430\\u044F\\u0432\\u043E\\u043A.\"}):/*#__PURE__*/_jsx(\"ul\",{children:applications.map(app=>{var _app$appliedAt,_app$appliedAt$toDate;return/*#__PURE__*/_jsxs(\"li\",{children:[\"\\u0417\\u0430\\u044F\\u0432\\u043A\\u0430 \\u043D\\u0430 \\u0432\\u0430\\u043A\\u0430\\u043D\\u0441\\u0456\\u044E: \",app.vacancyId,\" \\u2014 \\u043F\\u043E\\u0434\\u0430\\u043D\\u043E:\",\" \",((_app$appliedAt=app.appliedAt)===null||_app$appliedAt===void 0?void 0:(_app$appliedAt$toDate=_app$appliedAt.toDate)===null||_app$appliedAt$toDate===void 0?void 0:_app$appliedAt$toDate.call(_app$appliedAt).toLocaleString())||\"‚Äî\"]},app.id);})})]});}export default UserApplications;","map":{"version":3,"names":["React","useEffect","useState","auth","onAuthStateChanged","jsx","_jsx","jsxs","_jsxs","UserApplications","applications","setApplications","loading","setLoading","unsub","user","fetchApplications","uid","userId","_auth$currentUser","token","currentUser","getIdToken","res","fetch","headers","Authorization","data","json","err","console","error","children","length","map","app","_app$appliedAt","_app$appliedAt$toDate","vacancyId","appliedAt","toDate","call","toLocaleString","id"],"sources":["/Users/mihailmirosnicenko/Documents/html/lab-web/lab5/react-app/frontend/src/UserApplication.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { auth } from './backend/firebase-db.js'; // üîπ Import Firebase authentication correctly\nimport { onAuthStateChanged } from 'firebase/auth'; // üîπ Explicitly import `onAuthStateChanged`\n\nfunction UserApplications() {\n  const [applications, setApplications] = useState([]);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    const unsub = onAuthStateChanged(auth, (user) => {\n      if (user) {\n        fetchApplications(user.uid);\n      }\n    });\n\n    return () => unsub();\n  }, []);\n\n  const fetchApplications = async (userId) => {\n    try {\n      const token = await auth.currentUser?.getIdToken();\n      if (!token) return;\n\n      const res = await fetch(`http://localhost:5000/applications/${userId}`, {\n        headers: { Authorization: `Bearer ${token}` },\n      });\n\n      const data = await res.json();\n      setApplications(data);\n    } catch (err) {\n      console.error('Error fetching applications:', err);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  if (loading) return <p>–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è...</p>;\n\n  return (\n    <div>\n      <h2>–ü–æ–¥–∞–Ω—ñ –∑–∞—è–≤–∫–∏</h2>\n      {applications.length === 0 ? (\n        <p>–£ –≤–∞—Å —â–µ –Ω–µ–º–∞—î –ø–æ–¥–∞–Ω–∏—Ö –∑–∞—è–≤–æ–∫.</p>\n      ) : (\n        <ul>\n          {applications.map(app => (\n            <li key={app.id}>\n              –ó–∞—è–≤–∫–∞ –Ω–∞ –≤–∞–∫–∞–Ω—Å—ñ—é: {app.vacancyId} ‚Äî –ø–æ–¥–∞–Ω–æ:{\" \"}\n              {app.appliedAt?.toDate?.().toLocaleString() || \"‚Äî\"}\n            </li>\n          ))}\n        </ul>\n      )}\n    </div>\n  );\n}\n\nexport default UserApplications;\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAClD,OAASC,IAAI,KAAQ,0BAA0B,CAAE;AACjD,OAASC,kBAAkB,KAAQ,eAAe,CAAE;AAAA,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAEpD,QAAS,CAAAC,gBAAgBA,CAAA,CAAG,CAC1B,KAAM,CAACC,YAAY,CAAEC,eAAe,CAAC,CAAGT,QAAQ,CAAC,EAAE,CAAC,CACpD,KAAM,CAACU,OAAO,CAAEC,UAAU,CAAC,CAAGX,QAAQ,CAAC,IAAI,CAAC,CAE5CD,SAAS,CAAC,IAAM,CACd,KAAM,CAAAa,KAAK,CAAGV,kBAAkB,CAACD,IAAI,CAAGY,IAAI,EAAK,CAC/C,GAAIA,IAAI,CAAE,CACRC,iBAAiB,CAACD,IAAI,CAACE,GAAG,CAAC,CAC7B,CACF,CAAC,CAAC,CAEF,MAAO,IAAMH,KAAK,CAAC,CAAC,CACtB,CAAC,CAAE,EAAE,CAAC,CAEN,KAAM,CAAAE,iBAAiB,CAAG,KAAO,CAAAE,MAAM,EAAK,CAC1C,GAAI,KAAAC,iBAAA,CACF,KAAM,CAAAC,KAAK,CAAG,OAAAD,iBAAA,CAAMhB,IAAI,CAACkB,WAAW,UAAAF,iBAAA,iBAAhBA,iBAAA,CAAkBG,UAAU,CAAC,CAAC,EAClD,GAAI,CAACF,KAAK,CAAE,OAEZ,KAAM,CAAAG,GAAG,CAAG,KAAM,CAAAC,KAAK,CAAC,sCAAsCN,MAAM,EAAE,CAAE,CACtEO,OAAO,CAAE,CAAEC,aAAa,CAAE,UAAUN,KAAK,EAAG,CAC9C,CAAC,CAAC,CAEF,KAAM,CAAAO,IAAI,CAAG,KAAM,CAAAJ,GAAG,CAACK,IAAI,CAAC,CAAC,CAC7BjB,eAAe,CAACgB,IAAI,CAAC,CACvB,CAAE,MAAOE,GAAG,CAAE,CACZC,OAAO,CAACC,KAAK,CAAC,8BAA8B,CAAEF,GAAG,CAAC,CACpD,CAAC,OAAS,CACRhB,UAAU,CAAC,KAAK,CAAC,CACnB,CACF,CAAC,CAED,GAAID,OAAO,CAAE,mBAAON,IAAA,MAAA0B,QAAA,CAAG,6EAAe,CAAG,CAAC,CAE1C,mBACExB,KAAA,QAAAwB,QAAA,eACE1B,IAAA,OAAA0B,QAAA,CAAI,2EAAa,CAAI,CAAC,CACrBtB,YAAY,CAACuB,MAAM,GAAK,CAAC,cACxB3B,IAAA,MAAA0B,QAAA,CAAG,wJAA8B,CAAG,CAAC,cAErC1B,IAAA,OAAA0B,QAAA,CACGtB,YAAY,CAACwB,GAAG,CAACC,GAAG,OAAAC,cAAA,CAAAC,qBAAA,oBACnB7B,KAAA,OAAAwB,QAAA,EAAiB,sGACK,CAACG,GAAG,CAACG,SAAS,CAAC,+CAAU,CAAC,GAAG,CAChD,EAAAF,cAAA,CAAAD,GAAG,CAACI,SAAS,UAAAH,cAAA,kBAAAC,qBAAA,CAAbD,cAAA,CAAeI,MAAM,UAAAH,qBAAA,iBAArBA,qBAAA,CAAAI,IAAA,CAAAL,cAAwB,CAAC,CAACM,cAAc,CAAC,CAAC,GAAI,GAAG,GAF3CP,GAAG,CAACQ,EAGT,CAAC,EACN,CAAC,CACA,CACL,EACE,CAAC,CAEV,CAEA,cAAe,CAAAlC,gBAAgB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}