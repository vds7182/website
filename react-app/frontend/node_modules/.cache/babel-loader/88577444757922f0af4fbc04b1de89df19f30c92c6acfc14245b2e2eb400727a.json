{"ast":null,"code":"var _jsxFileName = \"/Users/mihailmirosnicenko/Documents/html/lab-web/lab5/react-app/frontend/src/vacancies.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from \"react\";\nimport { getDocs, collection, doc, setDoc, serverTimestamp } from \"firebase/firestore\";\nimport { onAuthStateChanged } from \"firebase/auth\";\nimport { auth, db } from \"./backend/firebase-config\"; // Your initialized Firebase config\nimport './vacancies.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction Vacancies() {\n  _s();\n  const [user, setUser] = useState(null);\n  const [vacancies, setVacancies] = useState([]);\n  const [isLoading, setIsLoading] = useState(true);\n\n  // üîπ Track authentication state\n  useEffect(() => {\n    const unsubscribe = onAuthStateChanged(auth, currentUser => {\n      setUser(currentUser);\n    });\n    return () => unsubscribe();\n  }, []);\n\n  // üîπ Fetch all vacancies from Firestore\n  useEffect(() => {\n    const fetchVacancies = async () => {\n      try {\n        const querySnapshot = await getDocs(collection(db, \"vacations\"));\n        const fetchedVacancies = querySnapshot.docs.map(doc => ({\n          id: doc.id,\n          ...doc.data()\n        }));\n        setVacancies(fetchedVacancies);\n      } catch (error) {\n        console.error(\"Error fetching vacancies from Firestore:\", error);\n      } finally {\n        setIsLoading(false);\n      }\n    };\n    fetchVacancies();\n  }, []);\n\n  // üîπ Handle job application\n  const handleApply = async (vacancyId, e) => {\n    try {\n      const applicationId = `${user.uid}_${vacancyId}`;\n      const applyForm = {\n        userId: user.uid,\n        vacancyId: vacancyId,\n        appliedAt: serverTimestamp()\n      };\n      await setDoc(doc(db, \"apply\", applicationId), applyForm);\n      e.target.textContent = \"–ó–∞—è–≤–∫—É –ø–æ–¥–∞–Ω–æ\";\n      e.target.style.backgroundColor = \"green\";\n      e.target.disabled = true;\n      console.log(\"Nice\");\n    } catch (error) {\n      console.error(\"Error submitting application:\", error);\n    }\n  };\n\n  // üîπ Display all vacancy cards\n  const displayVacancies = () => {\n    return vacancies.map(vacancy => /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"vacancy-card\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: vacancy.City\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"salary\",\n        children: [\"\\u20B4 \", vacancy.Salary]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"description\",\n        children: vacancy.About\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 9\n      }, this), user && /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: e => handleApply(vacancy.id, e),\n        style: {\n          backgroundColor: \"#007bff\",\n          color: \"white\"\n        },\n        children: \"\\u041F\\u043E\\u0434\\u0430\\u0442\\u0438 \\u0437\\u0430\\u044F\\u0432\\u043A\\u0443\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 11\n      }, this)]\n    }, vacancy.id, true, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 7\n    }, this));\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Available Vacancies\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 7\n    }, this), isLoading ? /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"Loading...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n      id: \"grid-container\",\n      className: \"vacancy-grid\",\n      children: displayVacancies()\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 82,\n    columnNumber: 5\n  }, this);\n}\n_s(Vacancies, \"McXRabJ9qHbCDW2nSyBlQoTQbRk=\");\n_c = Vacancies;\nexport default Vacancies;\nvar _c;\n$RefreshReg$(_c, \"Vacancies\");","map":{"version":3,"names":["React","useEffect","useState","getDocs","collection","doc","setDoc","serverTimestamp","onAuthStateChanged","auth","db","jsxDEV","_jsxDEV","Vacancies","_s","user","setUser","vacancies","setVacancies","isLoading","setIsLoading","unsubscribe","currentUser","fetchVacancies","querySnapshot","fetchedVacancies","docs","map","id","data","error","console","handleApply","vacancyId","e","applicationId","uid","applyForm","userId","appliedAt","target","textContent","style","backgroundColor","disabled","log","displayVacancies","vacancy","className","children","City","fileName","_jsxFileName","lineNumber","columnNumber","Salary","About","onClick","color","_c","$RefreshReg$"],"sources":["/Users/mihailmirosnicenko/Documents/html/lab-web/lab5/react-app/frontend/src/vacancies.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { getDocs, collection, doc, setDoc, serverTimestamp } from \"firebase/firestore\";\nimport { onAuthStateChanged } from \"firebase/auth\";\nimport { auth, db } from \"./backend/firebase-config\"; // Your initialized Firebase config\nimport './vacancies.css';\n\nfunction Vacancies() {\n  const [user, setUser] = useState(null);\n  const [vacancies, setVacancies] = useState([]);\n  const [isLoading, setIsLoading] = useState(true);\n\n  // üîπ Track authentication state\n  useEffect(() => {\n    const unsubscribe = onAuthStateChanged(auth, (currentUser) => {\n      setUser(currentUser);\n    });\n    return () => unsubscribe();\n  }, []);\n\n  // üîπ Fetch all vacancies from Firestore\n  useEffect(() => {\n    const fetchVacancies = async () => {\n      try {\n        const querySnapshot = await getDocs(collection(db, \"vacations\"));\n        const fetchedVacancies = querySnapshot.docs.map((doc) => ({\n          id: doc.id,\n          ...doc.data(),\n        }));\n        setVacancies(fetchedVacancies);\n      } catch (error) {\n        console.error(\"Error fetching vacancies from Firestore:\", error);\n      } finally {\n        setIsLoading(false);\n      }\n    };\n\n    fetchVacancies();\n  }, []);\n\n  // üîπ Handle job application\n  const handleApply = async (vacancyId, e) => {\n    try {\n      const applicationId = `${user.uid}_${vacancyId}`;\n      const applyForm = {\n        userId: user.uid,\n        vacancyId: vacancyId,\n        appliedAt: serverTimestamp(),\n      };\n  \n      await setDoc(doc(db, \"apply\", applicationId), applyForm);\n  \n      e.target.textContent = \"–ó–∞—è–≤–∫—É –ø–æ–¥–∞–Ω–æ\";\n      e.target.style.backgroundColor = \"green\";\n      e.target.disabled = true;\n      console.log(\"Nice\");\n    } catch (error) {\n      console.error(\"Error submitting application:\", error);\n    }\n  };\n  \n\n  // üîπ Display all vacancy cards\n  const displayVacancies = () => {\n    return vacancies.map((vacancy) => (\n      <div className=\"vacancy-card\" key={vacancy.id}>\n        <h3>{vacancy.City}</h3>\n        <p className=\"salary\">‚Ç¥ {vacancy.Salary}</p>\n        <p className=\"description\">{vacancy.About}</p>\n        {user && (\n          <button\n            onClick={(e) => handleApply(vacancy.id, e)}\n            style={{ backgroundColor: \"#007bff\", color: \"white\" }}\n          >\n            –ü–æ–¥–∞—Ç–∏ –∑–∞—è–≤–∫—É\n          </button>\n        )}\n      </div>\n    ));\n  };\n\n  return (\n    <div>\n      <h1>Available Vacancies</h1>\n      {isLoading ? (\n        <p>Loading...</p>\n      ) : (\n        <div id=\"grid-container\" className=\"vacancy-grid\">\n          {displayVacancies()}\n        </div>\n      )}\n    </div>\n  );\n}\n\nexport default Vacancies;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}