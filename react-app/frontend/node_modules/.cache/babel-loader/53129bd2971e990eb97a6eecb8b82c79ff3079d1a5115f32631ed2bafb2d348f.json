{"ast":null,"code":"import React,{useState}from\"react\";import{db}from\"./backend/firebase-config\";// Import Firestore from your firebase.js file\nimport{collection,getDocs,query,where,orderBy}from\"firebase/firestore\";import\"./filter.css\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function Filter(){const[vacancies,setVacancies]=useState([]);const[keyword,setKeyword]=useState(\"\");const[minSalary,setMinSalary]=useState(\"\");const[city,setCity]=useState(\"\");const[sortByDate,setSortByDate]=useState(false);// Helper to parse Firestore timestamps\nconst parseTimestamp=timestamp=>{if(!timestamp)return\"Невідома дата\";const date=timestamp.toDate?timestamp.toDate():new Date(timestamp);return date.toLocaleDateString();};// Fetch vacancies from Firebase with filtering and sorting\nconst searchVacancies=async()=>{try{let vacancyQuery=collection(db,\"vacations\");if(keyword){vacancyQuery=query(vacancyQuery,where(\"About\",\">=\",keyword),where(\"About\",\"<=\",keyword+\"\\uf8ff\"));}if(minSalary){vacancyQuery=query(vacancyQuery,where(\"Salary\",\">=\",Number(minSalary)));}if(city){vacancyQuery=query(vacancyQuery,where(\"City\",\"==\",city));}if(sortByDate){vacancyQuery=query(vacancyQuery,orderBy(\"add_date\",\"desc\"));// Sort by most recent\n}const querySnapshot=await getDocs(vacancyQuery);const filteredVacancies=querySnapshot.docs.map(doc=>({id:doc.id,...doc.data()}));setVacancies(filteredVacancies);}catch(error){console.error(\"Error fetching vacancies from Firestore:\",error);setVacancies([]);}};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"search-box\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"\\u0412\\u0432\\u0435\\u0434\\u0456\\u0442\\u044C \\u0432\\u0430\\u043A\\u0430\\u043D\\u0441\\u0456\\u044E\",value:keyword,onChange:e=>setKeyword(e.target.value)}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",placeholder:\"\\u0412\\u0432\\u0435\\u0434\\u0456\\u0442\\u044C \\u043C\\u0456\\u043D\\u0456\\u043C\\u0430\\u043B\\u044C\\u043D\\u0443 \\u0437\\u0430\\u0440\\u043F\\u043B\\u0430\\u0442\\u0443\",value:minSalary,onChange:e=>setMinSalary(e.target.value)}),/*#__PURE__*/_jsxs(\"select\",{value:city,onChange:e=>setCity(e.target.value),children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"\\u0412\\u0441\\u0456 \\u043C\\u0456\\u0441\\u0442\\u0430\"}),/*#__PURE__*/_jsx(\"option\",{value:\"\\u041B\\u044C\\u0432\\u0456\\u0432\",children:\"\\u041B\\u044C\\u0432\\u0456\\u0432\"}),/*#__PURE__*/_jsx(\"option\",{value:\"\\u041A\\u0438\\u0457\\u0432\",children:\"\\u041A\\u0438\\u0457\\u0432\"}),/*#__PURE__*/_jsx(\"option\",{value:\"\\u0425\\u0430\\u0440\\u043A\\u0456\\u0432\",children:\"\\u0425\\u0430\\u0440\\u043A\\u0456\\u0432\"}),/*#__PURE__*/_jsx(\"option\",{value:\"\\u041E\\u0434\\u0435\\u0441\\u0430\",children:\"\\u041E\\u0434\\u0435\\u0441\\u0430\"}),/*#__PURE__*/_jsx(\"option\",{value:\"\\u0414\\u043D\\u0456\\u043F\\u0440\\u043E\",children:\"\\u0414\\u043D\\u0456\\u043F\\u0440\\u043E\"})]}),/*#__PURE__*/_jsxs(\"label\",{children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:sortByDate,onChange:()=>setSortByDate(!sortByDate)}),\"\\u0421\\u043E\\u0440\\u0442\\u0443\\u0432\\u0430\\u0442\\u0438 \\u0437\\u0430 \\u0434\\u0430\\u0442\\u043E\\u044E (\\u0432\\u0456\\u0434 \\u043D\\u043E\\u0432\\u0456\\u0448\\u0438\\u0445 \\u0434\\u043E \\u0441\\u0442\\u0430\\u0440\\u0448\\u0438\\u0445)\"]})]}),/*#__PURE__*/_jsx(\"button\",{onClick:searchVacancies,children:\"\\u0428\\u0443\\u043A\\u0430\\u0442\\u0438\"}),/*#__PURE__*/_jsx(\"div\",{className:\"vacancy-results\",children:vacancies.length===0?/*#__PURE__*/_jsx(\"p\",{children:\"\\u0412\\u0430\\u043A\\u0430\\u043D\\u0441\\u0456\\u0439 \\u043D\\u0435 \\u0437\\u043D\\u0430\\u0439\\u0434\\u0435\\u043D\\u043E.\"}):vacancies.map(vacancy=>/*#__PURE__*/_jsxs(\"div\",{className:\"vacancy-card\",children:[/*#__PURE__*/_jsx(\"h3\",{children:vacancy.City||\"Місто не вказано\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"salary\",children:[\"$\",vacancy.Salary||\"Зарплата не вказана\"]}),/*#__PURE__*/_jsx(\"p\",{className:\"description\",children:vacancy.About||\"Опис відсутній\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"date\",children:[\"\\u041E\\u043F\\u0443\\u0431\\u043B\\u0456\\u043A\\u043E\\u0432\\u0430\\u043D\\u043E: \",parseTimestamp(vacancy.add_date)]}),/*#__PURE__*/_jsx(\"button\",{onClick:e=>{e.target.textContent=\"Заявку подано\";e.target.style.backgroundColor=\"green\";e.target.disabled=true;},style:{backgroundColor:\"#007bff\",color:\"white\"},children:\"\\u041F\\u043E\\u0434\\u0430\\u0442\\u0438 \\u0437\\u0430\\u044F\\u0432\\u043A\\u0443\"})]},vacancy.id))})]});}export default Filter;","map":{"version":3,"names":["React","useState","db","collection","getDocs","query","where","orderBy","jsx","_jsx","jsxs","_jsxs","Filter","vacancies","setVacancies","keyword","setKeyword","minSalary","setMinSalary","city","setCity","sortByDate","setSortByDate","parseTimestamp","timestamp","date","toDate","Date","toLocaleDateString","searchVacancies","vacancyQuery","Number","querySnapshot","filteredVacancies","docs","map","doc","id","data","error","console","children","className","type","placeholder","value","onChange","e","target","checked","onClick","length","vacancy","City","Salary","About","add_date","textContent","style","backgroundColor","disabled","color"],"sources":["/Users/mihailmirosnicenko/Documents/html/lab-web/lab5/react-app/frontend/src/filter.js"],"sourcesContent":["import React, { useState } from \"react\";\nimport { db } from \"./backend/firebase-config\"; // Import Firestore from your firebase.js file\nimport { collection, getDocs, query, where, orderBy } from \"firebase/firestore\";\nimport \"./filter.css\";\n\nfunction Filter() {\n  const [vacancies, setVacancies] = useState([]);\n  const [keyword, setKeyword] = useState(\"\");\n  const [minSalary, setMinSalary] = useState(\"\");\n  const [city, setCity] = useState(\"\");\n  const [sortByDate, setSortByDate] = useState(false);\n\n  // Helper to parse Firestore timestamps\n  const parseTimestamp = (timestamp) => {\n    if (!timestamp) return \"Невідома дата\";\n    const date = timestamp.toDate ? timestamp.toDate() : new Date(timestamp);\n    return date.toLocaleDateString();\n  };\n\n  // Fetch vacancies from Firebase with filtering and sorting\n  const searchVacancies = async () => {\n    try {\n      let vacancyQuery = collection(db, \"vacations\");\n\n      if (keyword) {\n        vacancyQuery = query(\n          vacancyQuery,\n          where(\"About\", \">=\", keyword),\n          where(\"About\", \"<=\", keyword + \"\\uf8ff\")\n        );\n      }\n\n      if (minSalary) {\n        vacancyQuery = query(vacancyQuery, where(\"Salary\", \">=\", Number(minSalary)));\n      }\n\n      if (city) {\n        vacancyQuery = query(vacancyQuery, where(\"City\", \"==\", city));\n      }\n\n      if (sortByDate) {\n        vacancyQuery = query(vacancyQuery, orderBy(\"add_date\", \"desc\")); // Sort by most recent\n      }\n\n      const querySnapshot = await getDocs(vacancyQuery);\n      const filteredVacancies = querySnapshot.docs.map((doc) => ({\n        id: doc.id,\n        ...doc.data(),\n      }));\n\n      setVacancies(filteredVacancies);\n    } catch (error) {\n      console.error(\"Error fetching vacancies from Firestore:\", error);\n      setVacancies([]);\n    }\n  };\n\n  return (\n    <div>\n      {/* Search Form */}\n      <div className=\"search-box\">\n        <input\n          type=\"text\"\n          placeholder=\"Введіть вакансію\"\n          value={keyword}\n          onChange={(e) => setKeyword(e.target.value)}\n        />\n        <input\n          type=\"number\"\n          placeholder=\"Введіть мінімальну зарплату\"\n          value={minSalary}\n          onChange={(e) => setMinSalary(e.target.value)}\n        />\n        <select value={city} onChange={(e) => setCity(e.target.value)}>\n          <option value=\"\">Всі міста</option>\n          <option value=\"Львів\">Львів</option>\n          <option value=\"Київ\">Київ</option>\n          <option value=\"Харків\">Харків</option>\n          <option value=\"Одеса\">Одеса</option>\n          <option value=\"Дніпро\">Дніпро</option>\n        </select>\n        <label>\n          <input\n            type=\"checkbox\"\n            checked={sortByDate}\n            onChange={() => setSortByDate(!sortByDate)}\n          />\n          Сортувати за датою (від новіших до старших)\n        </label>\n      </div>\n\n      {/* Search Button */}\n      <button onClick={searchVacancies}>Шукати</button>\n\n      {/* Results */}\n      <div className=\"vacancy-results\">\n        {vacancies.length === 0 ? (\n          <p>Вакансій не знайдено.</p>\n        ) : (\n          vacancies.map((vacancy) => (\n            <div key={vacancy.id} className=\"vacancy-card\">\n              <h3>{vacancy.City || \"Місто не вказано\"}</h3>\n              <p className=\"salary\">${vacancy.Salary || \"Зарплата не вказана\"}</p>\n              <p className=\"description\">{vacancy.About || \"Опис відсутній\"}</p>\n              <p className=\"date\">Опубліковано: {parseTimestamp(vacancy.add_date)}</p>\n              <button\n                onClick={(e) => {\n                  e.target.textContent = \"Заявку подано\";\n                  e.target.style.backgroundColor = \"green\";\n                  e.target.disabled = true;\n                }}\n                style={{ backgroundColor: \"#007bff\", color: \"white\" }}\n              >\n                Подати заявку\n              </button>\n            </div>\n          ))\n        )}\n      </div>\n    </div>\n  );\n}\n\nexport default Filter;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}