{"ast":null,"code":"import React,{useState,useEffect}from\"react\";import\"./profile.css\";import{auth,db}from\"./backend/firebase-config\";// Import Firebase Auth and Firestore\nimport{doc,getDoc,setDoc,updateDoc}from\"firebase/firestore\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function Profile(){const[user,setUser]=useState(null);// To store the logged-in user\nconst[profileData,setProfileData]=useState({workExperience:\"\",skills:\"\"});// To store profile data\nconst[editing,setEditing]=useState(false);// Track edit mode\nuseEffect(()=>{const unsubscribe=auth.onAuthStateChanged(async currentUser=>{if(currentUser){setUser(currentUser);const userDoc=await getDoc(doc(db,\"users\",currentUser.uid));if(userDoc.exists()){setProfileData(userDoc.data());}}else{setUser(null);}});return()=>unsubscribe();},[]);const handleEditToggle=()=>{setEditing(!editing);};const handleSave=async()=>{if(user){try{await setDoc(doc(db,\"users\",user.uid),profileData);setEditing(false);alert(\"Profile updated successfully!\");}catch(error){console.error(\"Error saving profile:\",error);alert(\"Failed to save profile.\");}}};const handleChange=e=>{const{name,value}=e.target;setProfileData(prevData=>({...prevData,[name]:value}));};return/*#__PURE__*/_jsxs(\"div\",{className:\"profile\",children:[/*#__PURE__*/_jsx(\"header\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"profile-container\",children:[/*#__PURE__*/_jsx(\"img\",{src:\"/ava.jpg\",width:\"200\",height:\"200\",alt:\"\\u0410\\u0432\\u0430\\u0442\\u0430\\u0440 \\u043A\\u043E\\u0440\\u0438\\u0441\\u0442\\u0443\\u0432\\u0430\\u0447\\u0430\"}),editing?/*#__PURE__*/_jsx(\"textarea\",{name:\"Name\",value:profileData.Name,onChange:handleChange,placeholder:\"\\u0414\\u043E\\u0434\\u0430\\u0439\\u0442\\u0435 \\u0432\\u0430\\u0448\\u0435 \\u0456\\u043C\\u02BC\\u044F\",className:\"small-textarea\"}):/*#__PURE__*/_jsx(\"p\",{children:profileData.Name||\"Імʼя не вказано\"}),\"        \"]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"bottom-text\",children:[/*#__PURE__*/_jsxs(\"p\",{children:[\"\\u0422\\u0435\\u043B\\u0435\\u0444\\u043E\\u043D: \",user?user.phoneNumber||\"Не вказано\":\"Не авторизовано\"]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Email: \",user?user.email:\"Не авторизовано\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text_l\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"\\u041F\\u0420\\u041E\\u0424\\u0415\\u0421\\u0406\\u0419\\u041D\\u0418\\u0419 \\u0414\\u041E\\u0421\\u0412\\u0406\\u0414\"}),editing?/*#__PURE__*/_jsx(\"textarea\",{name:\"workExperience\",value:profileData.workExperience,onChange:handleChange,placeholder:\"\\u0414\\u043E\\u0434\\u0430\\u0439\\u0442\\u0435 \\u0434\\u043E\\u0441\\u0432\\u0456\\u0434 \\u0440\\u043E\\u0431\\u043E\\u0442\\u0438\",className:\"big-textarea\"}):/*#__PURE__*/_jsx(\"p\",{children:profileData.workExperience||\"Досвід роботи не вказано\"}),/*#__PURE__*/_jsx(\"p\",{children:\"\\u041D\\u0410\\u0412\\u0418\\u0427\\u041A\\u0418\"}),editing?/*#__PURE__*/_jsx(\"textarea\",{name:\"skills\",value:profileData.skills,onChange:handleChange,placeholder:\"\\u0414\\u043E\\u0434\\u0430\\u0439\\u0442\\u0435 \\u043D\\u0430\\u0432\\u0438\\u0447\\u043A\\u0438\",className:\"big-textarea\"}):/*#__PURE__*/_jsx(\"p\",{children:profileData.skills||\"Навички не вказано\"}),user&&/*#__PURE__*/_jsx(\"button\",{onClick:editing?handleSave:handleEditToggle,className:\"change\",children:editing?\"Зберегти\":\"Редагувати\"})]})]});}export default Profile;","map":{"version":3,"names":["React","useState","useEffect","auth","db","doc","getDoc","setDoc","updateDoc","jsx","_jsx","jsxs","_jsxs","Profile","user","setUser","profileData","setProfileData","workExperience","skills","editing","setEditing","unsubscribe","onAuthStateChanged","currentUser","userDoc","uid","exists","data","handleEditToggle","handleSave","alert","error","console","handleChange","e","name","value","target","prevData","className","children","src","width","height","alt","Name","onChange","placeholder","phoneNumber","email","onClick"],"sources":["/Users/mihailmirosnicenko/Documents/html/lab-web/lab5/react-app/frontend/src/profile.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport \"./profile.css\";\nimport { auth, db } from \"./backend/firebase-config\"; // Import Firebase Auth and Firestore\nimport { doc, getDoc, setDoc, updateDoc } from \"firebase/firestore\";\n\nfunction Profile() {\n  const [user, setUser] = useState(null); // To store the logged-in user\n  const [profileData, setProfileData] = useState({\n    workExperience: \"\",\n    skills: \"\",\n  }); // To store profile data\n  const [editing, setEditing] = useState(false); // Track edit mode\n\n  useEffect(() => {\n    const unsubscribe = auth.onAuthStateChanged(async (currentUser) => {\n      if (currentUser) {\n        setUser(currentUser);\n        const userDoc = await getDoc(doc(db, \"users\", currentUser.uid));\n        if (userDoc.exists()) {\n          setProfileData(userDoc.data());\n        }\n      } else {\n        setUser(null);\n      }\n    });\n\n    return () => unsubscribe();\n  }, []);\n\n  const handleEditToggle = () => {\n    setEditing(!editing);\n  };\n\n  const handleSave = async () => {\n    if (user) {\n      try {\n        await setDoc(doc(db, \"users\", user.uid), profileData);\n        setEditing(false);\n        alert(\"Profile updated successfully!\");\n      } catch (error) {\n        console.error(\"Error saving profile:\", error);\n        alert(\"Failed to save profile.\");\n      }\n    }\n  };\n\n  const handleChange = (e) => {\n    const { name, value } = e.target;\n    setProfileData((prevData) => ({\n      ...prevData,\n      [name]: value,\n    }));\n  };\n\n  return (\n    <div className=\"profile\">\n      <header>\n        <div className=\"profile-container\">\n          <img\n            src=\"/ava.jpg\"\n            width=\"200\"\n            height=\"200\"\n            alt=\"Аватар користувача\"\n          />\n         \n        {editing ? (\n          <textarea\n            name=\"Name\"\n            value={profileData.Name}\n            onChange={handleChange}\n            placeholder=\"Додайте ваше імʼя\"\n          className=\"small-textarea\"/>\n        ) : (\n          <p>{profileData.Name || \"Імʼя не вказано\"}</p>\n        )}        </div>\n      </header>\n\n      <div className=\"bottom-text\">\n        <p>Телефон: {user ? user.phoneNumber || \"Не вказано\" : \"Не авторизовано\"}</p>\n        <p>Email: {user ? user.email : \"Не авторизовано\"}</p>\n      </div>\n\n      <div className=\"text_l\">\n        <p>ПРОФЕСІЙНИЙ ДОСВІД</p>\n        {editing ? (\n          <textarea\n            name=\"workExperience\"\n            value={profileData.workExperience}\n            onChange={handleChange}\n            placeholder=\"Додайте досвід роботи\"\n          className=\"big-textarea\"/>\n        ) : (\n          <p>{profileData.workExperience || \"Досвід роботи не вказано\"}</p>\n        )}\n\n        <p>НАВИЧКИ</p>\n        {editing ? (\n          <textarea\n            name=\"skills\"\n            value={profileData.skills}\n            onChange={handleChange}\n            placeholder=\"Додайте навички\"\n            className=\"big-textarea\"/>\n        ) : (\n          <p>{profileData.skills || \"Навички не вказано\"}</p>\n        )}\n\n        {user && (\n          <button onClick={editing ? handleSave : handleEditToggle} className=\"change\">\n            {editing ? \"Зберегти\" : \"Редагувати\"}\n          </button>\n        )}\n      </div>\n    </div>\n  );\n}\n\nexport default Profile;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}