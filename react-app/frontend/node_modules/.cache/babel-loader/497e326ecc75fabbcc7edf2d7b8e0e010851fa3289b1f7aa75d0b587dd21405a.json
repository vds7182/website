{"ast":null,"code":"import React,{useEffect,useState}from'react';import{getAuth,onAuthStateChanged}from'firebase/auth';import{auth}from'../backend/firebase-db';// üîπ –ò—Å–ø–æ–ª—å–∑—É–µ–º —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π Firebase Auth\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";console.log(\"Auth instance:\",auth);function UserApplication(){const[user,setUser]=useState(null);const[applications,setApplications]=useState([]);const[loading,setLoading]=useState(true);useEffect(()=>{const unsub=onAuthStateChanged(auth,currentUser=>{setUser(currentUser);if(currentUser){fetchUserData(currentUser.uid);fetchApplications(currentUser.uid);}});return()=>unsub();},[]);// ‚úÖ –ó–∞–ø—Ä–æ—Å –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è\nconst fetchUserData=async userId=>{try{const res=await fetch(`http://localhost:5000/user/${userId}`);const data=await res.json();console.log('User Data:',data);}catch(err){console.error('Error fetching user data:',err);}};// ‚úÖ –ó–∞–ø—Ä–æ—Å –∑–∞—è–≤–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è\nconst fetchApplications=async userId=>{try{const res=await fetch(`http://localhost:5000/applications/${userId}`);const data=await res.json();setApplications(data);}catch(err){console.error('Error fetching applications:',err);}finally{setLoading(false);}};// ‚úÖ –û—Ç–ø—Ä–∞–≤–∫–∞ –∑–∞—è–≤–∫–∏\nconst createApplication=async applicationData=>{if(!user)return;try{const res=await fetch(`http://localhost:5000/applications/${user.uid}`,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(applicationData)});const data=await res.json();console.log('Application Response:',data);}catch(err){console.error('Error creating application:',err);}};// ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è\nconst createUser=async userData=>{if(!user)return;try{const res=await fetch(`http://localhost:5000/user/${user.uid}`,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(userData)});const data=await res.json();console.log('User Response:',data);}catch(err){console.error('Error creating user:',err);}};if(loading)return/*#__PURE__*/_jsx(\"p\",{children:\"\\u0417\\u0430\\u0432\\u0430\\u043D\\u0442\\u0430\\u0436\\u0435\\u043D\\u043D\\u044F...\"});return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"\\u041F\\u043E\\u0434\\u0430\\u043D\\u0456 \\u0437\\u0430\\u044F\\u0432\\u043A\\u0438\"}),applications.length===0?/*#__PURE__*/_jsx(\"p\",{children:\"\\u0423 \\u0432\\u0430\\u0441 \\u0449\\u0435 \\u043D\\u0435\\u043C\\u0430\\u0454 \\u043F\\u043E\\u0434\\u0430\\u043D\\u0438\\u0445 \\u0437\\u0430\\u044F\\u0432\\u043E\\u043A.\"}):/*#__PURE__*/_jsx(\"ul\",{children:applications.map(app=>{var _app$appliedAt,_app$appliedAt$toDate;return/*#__PURE__*/_jsxs(\"li\",{children:[\"\\u0417\\u0430\\u044F\\u0432\\u043A\\u0430 \\u043D\\u0430 \\u0432\\u0430\\u043A\\u0430\\u043D\\u0441\\u0456\\u044E: \",app.vacancyId,\" \\u2014 \\u043F\\u043E\\u0434\\u0430\\u043D\\u043E:\",\" \",((_app$appliedAt=app.appliedAt)===null||_app$appliedAt===void 0?void 0:(_app$appliedAt$toDate=_app$appliedAt.toDate)===null||_app$appliedAt$toDate===void 0?void 0:_app$appliedAt$toDate.call(_app$appliedAt).toLocaleString())||\"‚Äî\"]},app.id);})}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>createUser({name:\"–ò–≤–∞–Ω\",experience:\"2 years\"}),children:\"\\u0421\\u043E\\u0437\\u0434\\u0430\\u0442\\u044C \\u043F\\u043E\\u043B\\u044C\\u0437\\u043E\\u0432\\u0430\\u0442\\u0435\\u043B\\u044F\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>createApplication({vacancyId:\"123\",appliedAt:new Date()}),children:\"\\u041F\\u043E\\u0434\\u0430\\u0442\\u044C \\u0437\\u0430\\u044F\\u0432\\u043A\\u0443\"})]});}export default UserApplication;","map":{"version":3,"names":["React","useEffect","useState","getAuth","onAuthStateChanged","auth","jsx","_jsx","jsxs","_jsxs","console","log","UserApplication","user","setUser","applications","setApplications","loading","setLoading","unsub","currentUser","fetchUserData","uid","fetchApplications","userId","res","fetch","data","json","err","error","createApplication","applicationData","method","headers","body","JSON","stringify","createUser","userData","children","length","map","app","_app$appliedAt","_app$appliedAt$toDate","vacancyId","appliedAt","toDate","call","toLocaleString","id","onClick","name","experience","Date"],"sources":["/Users/mihailmirosnicenko/Documents/html/lab-web/lab5/react-app/frontend/src/UserApplication.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { getAuth, onAuthStateChanged } from 'firebase/auth';\n\nimport {auth} from '../backend/firebase-db'; // üîπ –ò—Å–ø–æ–ª—å–∑—É–µ–º —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π Firebase Auth\n\nconsole.log(\"Auth instance:\", auth)\nfunction UserApplication() {\n  const [user, setUser] = useState(null);\n  const [applications, setApplications] = useState([]);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    const unsub = onAuthStateChanged(auth, (currentUser) => {\n      setUser(currentUser);\n      if (currentUser) {\n        fetchUserData(currentUser.uid);\n        fetchApplications(currentUser.uid);\n      }\n    });\n    return () => unsub();\n  }, []);\n\n  // ‚úÖ –ó–∞–ø—Ä–æ—Å –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è\n  const fetchUserData = async (userId) => {\n    try {\n      const res = await fetch(`http://localhost:5000/user/${userId}`);\n      const data = await res.json();\n      console.log('User Data:', data);\n    } catch (err) {\n      console.error('Error fetching user data:', err);\n    }\n  };\n\n  // ‚úÖ –ó–∞–ø—Ä–æ—Å –∑–∞—è–≤–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è\n  const fetchApplications = async (userId) => {\n    try {\n      const res = await fetch(`http://localhost:5000/applications/${userId}`);\n      const data = await res.json();\n      setApplications(data);\n    } catch (err) {\n      console.error('Error fetching applications:', err);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // ‚úÖ –û—Ç–ø—Ä–∞–≤–∫–∞ –∑–∞—è–≤–∫–∏\n  const createApplication = async (applicationData) => {\n    if (!user) return;\n    try {\n      const res = await fetch(`http://localhost:5000/applications/${user.uid}`, {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify(applicationData),\n      });\n      const data = await res.json();\n      console.log('Application Response:', data);\n    } catch (err) {\n      console.error('Error creating application:', err);\n    }\n  };\n\n  // ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è\n  const createUser = async (userData) => {\n    if (!user) return;\n    try {\n      const res = await fetch(`http://localhost:5000/user/${user.uid}`, {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify(userData),\n      });\n      const data = await res.json();\n      console.log('User Response:', data);\n    } catch (err) {\n      console.error('Error creating user:', err);\n    }\n  };\n\n  if (loading) return <p>–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è...</p>;\n\n  return (\n    <div>\n      <h2>–ü–æ–¥–∞–Ω—ñ –∑–∞—è–≤–∫–∏</h2>\n      {applications.length === 0 ? (\n        <p>–£ –≤–∞—Å —â–µ –Ω–µ–º–∞—î –ø–æ–¥–∞–Ω–∏—Ö –∑–∞—è–≤–æ–∫.</p>\n      ) : (\n        <ul>\n          {applications.map(app => (\n            <li key={app.id}>\n              –ó–∞—è–≤–∫–∞ –Ω–∞ –≤–∞–∫–∞–Ω—Å—ñ—é: {app.vacancyId} ‚Äî –ø–æ–¥–∞–Ω–æ:{\" \"}\n              {app.appliedAt?.toDate?.().toLocaleString() || \"‚Äî\"}\n            </li>\n          ))}\n        </ul>\n      )}\n      {/* –ö–Ω–æ–ø–∫–∏ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏ –∑–∞—è–≤–∫–∏ */}\n      <button onClick={() => createUser({ name: \"–ò–≤–∞–Ω\", experience: \"2 years\" })}>–°–æ–∑–¥–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</button>\n      <button onClick={() => createApplication({ vacancyId: \"123\", appliedAt: new Date() })}>–ü–æ–¥–∞—Ç—å –∑–∞—è–≤–∫—É</button>\n    </div>\n  );\n}\n\nexport default UserApplication;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}